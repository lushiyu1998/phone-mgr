{"version":3,"sources":["webpack:///./src/views/InviteCode/index.vue","webpack:///./src/views/InviteCode/index.js","webpack:///./src/views/InviteCode/index.vue?88b9"],"names":["title","value","count","min","max","type","add","pagination","bordered","columns","data-source","list","status","record","user","actions","remove","size","style","current","curPage","pageSize","total","setPage","dataIndex","slots","customRender","defineComponent","setup","ref","getList","inviteCode","res","result","success","data","l","t","console","log","onMounted","page","message","_id","msg","__exports__","render"],"mappings":"oJAIsE,O,iBAExB,M,iBAoBjC,Q,uQAzBX,eAyCM,YAxCJ,eAuCS,GAvCDA,MAAM,SAAO,C,yBACnB,iBAIM,CAJN,eAIM,YAHJ,eAA8D,GAAtCC,MAAO,EAAAC,M,gDAAA,EAAAA,MAAK,IAAGC,IAAK,EAAIC,IAAK,K,oBAErD,eAAmD,GAAzCC,KAAK,UAAW,QAAO,EAAAC,K,0BAAK,iBAAE,C,4BAG1C,eAAa,GAEb,eAoBM,YAnBJ,eAkBU,GAjBPC,YAAY,EACbC,SAAA,GACCC,QAAS,EAAAA,QACTC,cAAa,EAAAC,M,CAEHC,OAAM,iBACf,gBADmBC,EACnB,EADmBA,OACnB,MADyB,C,8BACtBA,EAAOC,KAAI,oBAELC,QAAO,iBAChB,gBADoBF,EACpB,EADoBA,OACpB,MAD0B,CAC1B,eAMW,GALR,QAAK,mBAAE,EAAAG,OAAOH,IACfI,KAAK,QACLZ,KAAK,U,0BACN,iBAED,C,qEAKN,eAOW,GAPDa,MAAA,uBAAwB,C,yBAChC,iBAKgB,CALhB,eAKgB,GAJNC,QAAS,EAAAC,Q,kDAAA,EAAAA,QAAO,IACvBC,SAAU,GACVC,MAAO,EAAAA,MACP,SAAQ,EAAAC,S,6HCjCbd,EAAU,CACd,CACET,MAAO,MACPwB,UAAW,QAEb,CACExB,MAAO,OACPyB,MAAO,CACLC,aAAc,WAGlB,CACE1B,MAAO,KACPyB,MAAO,CACLC,aAAc,aAKLC,iBAAgB,CAC7BC,MAD6B,WAE3B,IAAM1B,EAAQ2B,eAAI,GACZT,EAAUS,eAAI,GACdlB,EAAOkB,eAAI,IACXP,EAAQO,eAAI,GAEZC,EAAO,yDAAG,oHACIC,OAAWpB,KAAKS,EAAQnB,MAAO,IADnC,OACR+B,EADQ,OAGdC,eAAOD,GACJE,SAAQ,YAAqC,QAAlCC,KAAcC,EAAoB,EAA1BzB,KAAgB0B,EAAU,EAAjBf,MAC3BX,EAAKV,MAAQmC,EACbd,EAAMrB,MAAQoC,KANJ,2CAAH,qDASbC,QAAQC,IAAIR,QAEZS,gBAAU,WACRV,OAGF,IAAMP,EAAU,SAACkB,GACfrB,EAAQnB,MAAQwC,EAChBX,KAGIxB,EAAG,yDAAG,oHACQyB,OAAWzB,IAAIJ,EAAMD,OAD7B,OACJ+B,EADI,OAGVC,eAAOD,GACJE,SAAQ,WACPQ,OAAQR,QAAR,eAAwBhC,EAAMD,MAA9B,UACA6B,OANM,2CAAH,qDAUHd,EAAM,yDAAG,8GAAS2B,EAAT,EAASA,IAAT,SACKZ,OAAWf,OAAO2B,GADvB,OACPX,EADO,OAGbC,eAAOD,GACJE,SAAQ,YAAa,IAAVU,EAAU,EAAVA,IACVF,OAAQR,QAAQU,GAEhBd,OAPS,2CAAH,sDAWZ,MAAO,CACL5B,QAEAS,OACAW,QACAb,UACAW,UACAG,UACAjB,MACAU,a,qBC5EN,MAAM6B,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/InviteCode.ee20c1df.js","sourcesContent":["<template>\r\n  <div>\r\n    <a-card title=\"邀请码管理\">\r\n      <div>\r\n        <a-input-number v-model:value=\"count\" :min=\"1\" :max=\"10000\" />\r\n        &nbsp;\r\n        <a-button type=\"primary\" @click=\"add\">添加</a-button>\r\n      </div>\r\n\r\n      <a-divider />\r\n\r\n      <div>\r\n        <a-table\r\n          :pagination=\"false\"\r\n          bordered\r\n          :columns=\"columns\"\r\n          :data-source=\"list\"\r\n        >\r\n          <template #status=\"{ record }\">\r\n            {{ record.user ? '已使用' : '未使用' }}\r\n          </template>\r\n          <template #actions=\"{ record }\">\r\n            <a-button\r\n              @click=\"remove(record)\"\r\n              size=\"small\"\r\n              type=\"danger\"\r\n            >\r\n              删除\r\n            </a-button>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n\r\n      <flex-end style=\"margin-top: 24px\">\r\n        <a-pagination\r\n          v-model:current=\"curPage\"\r\n          :pageSize=\"20\"\r\n          :total=\"total\"\r\n          @change=\"setPage\"\r\n        ></a-pagination>\r\n      </flex-end>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script src=\"./index.js\"></script>\r\n","import { defineComponent, ref, onMounted } from 'vue';\r\nimport { inviteCode } from '@/service';\r\nimport { result } from '@/helpers/utils';\r\nimport { message } from 'ant-design-vue';\r\n\r\nconst columns = [\r\n  {\r\n    title: '邀请码',\r\n    dataIndex: 'code',\r\n  },\r\n  {\r\n    title: '使用状态',\r\n    slots: {\r\n      customRender: 'status',\r\n    },\r\n  },\r\n  {\r\n    title: '操作',\r\n    slots: {\r\n      customRender: 'actions',\r\n    },\r\n  },\r\n];\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const count = ref(1);\r\n    const curPage = ref(1);\r\n    const list = ref([]);\r\n    const total = ref(0);\r\n\r\n    const getList = async () => {\r\n      const res = await inviteCode.list(curPage.value, 20);\r\n\r\n      result(res)\r\n        .success(({ data: { list: l, total: t } }) => {\r\n          list.value = l;\r\n          total.value = t;\r\n        });\r\n    };\r\n    console.log(inviteCode);\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    const setPage = (page) => {\r\n      curPage.value = page;\r\n      getList();\r\n    };\r\n\r\n    const add = async () => {\r\n      const res = await inviteCode.add(count.value);\r\n\r\n      result(res)\r\n        .success(() => {\r\n          message.success(`成功添加 ${count.value} 条邀请码`);\r\n          getList();\r\n        });\r\n    };\r\n\r\n    const remove = async ({ _id }) => {\r\n      const res = await inviteCode.remove(_id);\r\n\r\n      result(res)\r\n        .success(({ msg }) => {\r\n          message.success(msg);\r\n\r\n          getList();\r\n        });\r\n    };\r\n\r\n    return {\r\n      count,\r\n\r\n      list,\r\n      total,\r\n      columns,\r\n      curPage,\r\n      setPage,\r\n      add,\r\n      remove,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=56433f4e\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\桌面\\\\projects\\\\phone-mgr\\\\phone-mgr-fe\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}